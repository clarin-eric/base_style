sudo: false
git:
  depth: 1
addons:
  apt:
    packages:
    - curl
    - bsdtar
language: java
jdk:
  - oraclejdk8
env:
  - STYLE_VERSION="0.1.2-dev" BOOTSTRAP_VER="3.3.7"
script:
  - sh -x ./build.sh
  - mvn --version
  - mvn clean deploy -X -Pcss-with-bootstrap --settings settings.xml
  - mvn clean deploy -X -Pless-with-bootstrap --settings settings.xml
  - mvn clean deploy -X -Pless-without-bootstrap --settings settings.xml
deploy:
  api_key:
    secure: "$DEPLOY_OAUTH_TOKEN"
  file:
    - "release-${STYLE_VERSION}.tgz"
    - "variables.less"
  on:
    tags: true
  overwrite: true
  provider: releases
  skip_cleanup: true
notifications:
  email:
    on_success: change
    on_failure: always
